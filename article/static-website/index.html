<!DOCTYPE html><html lang="en-US"><head><title>Making a personal website</title><meta charset="UTF-8"><meta name="robots" content="index, follow"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="author" content="Steven Baldasty"><meta property="og:image" content><link rel="icon" type="image/x-icon" href="/logo.png"><link rel="stylesheet" href="/site.css"></head><body><div class="brand"><img src="/logo.png" title="Website logo" alt="Three stacked blue boxes with binary digits on them" width="86" height="86"><div class="exposition"><div class="title">Bit flipping laboratory &amp; Personal website</div><div class="caption">No sneaky cookies haunt these pages, but whether someone tracks you I do not know. Information flows through many channels, and every action leaves a trace.</div></div></div><div class="nav"><a href="/">Home</a><a href="/article/">Articles</a><a href="/argmap/">Argmap</a><a href="/media/">Media</a></div><hr><div class="article"><div class="date">2023-07-14</div><div class="summary">Story of this static website. Working with Pyramid and Mako templates. Hosting on GitHub Pages. Scripts for efficient development, serving locally, and remote deployment.</div><h1>Making a personal website</h1><p>American law asserts and usually honors the individual right of self expression. New England residents usually accept diversity in individuals. In my head, and especially in my past, the situation was very different. Some thoughts were wrong, many feelings were &quot;inappropriate&quot;, and self-censorship was a way of life. In adulthood I eventually found social groups where people encourage deep communication and honesty. I found a meditation practice that welcomes every thought and feeling without filters and without judgement. Feelings come, feelings go.</p><p>In some ways, I benefited from being mostly silent. I learned to listen and understand people. I avoided unnecessary conflict. In other ways, I missed the boat. Expressing myself could have helped me understand myself better sooner. It could have helped me form closer connections with more people sooner. A personal website is about public expression, which in my opinion is the least useful kind. My hope is not to use a website as a megaphone or to convince people of things. It's to help me explore and communicate a little more precisely than I can in my head or in conversation with friends, and I hope it will be helpful to others too.</p><p>I first thought of doing this in the early 2000's, when websites were kind of a bigger deal; but hey, at least we have HTML 5 and easy tools now!</p><h2>The vision</h2><p>Here are some of my ideas. From there it's figuring out the best technology stack, and starting to make some things happen with my spare time.</p><ul><li><p><b>Articles.</b> I want to write short posts about my life, and about technical topics I explore. These are among the most standard forms of content people create online. Standard blogging platforms would be appropriate, if these were my only goals.</p></li><li><p><b>Image galleries.</b> Of course I want to augment some of my articles with captioned pictures, like a photo album. I surprisingly couldn't find much in the way of standard widgets that support the relatively simple layout I'm envisioning, so direct control over the HTML would be nice.</p></li><li><p><b>Math and code snippets.</b> With math and computer programming among my deepest interests, I certainly want to share code and possibly formulae that pure HTML can't render well too. There are standard solutions here. Some are based on generating images. Others lean on Javascript.</p></li><li><p><b>Interactive fiction.</b> I'm not sure if I'll actually do it, but I always thought it would be fun to write stories where readers navigate pages based on what they want the character to do. The navigation would need to be stylized, probably not something standard blogging platforms would offer.</p></li><li><p><b>Argument maps.</b> I have a longstanding curiosity in developing navigable online argument mapping software and documenting niche belief systems. I'll definitely be generating pages programmatically from data - if not for interactive fiction, then for this.</p></li><li><p><b>Free hosting.</b> I don't see a way around paying for the domain name, but I have to believe in the 2020's there are tricks to not pay for site hosting - especially if the site is only static content and has no hard uptime or latency requirements.</p></li></ul><p>One technology stack usually isn't universally better or worse than another. Good choices depend a lot on context: your skill set, what you're trying to accomplish, time constraints, and likely many other considerations. There are so many choices. The vision for me boils down to some kind of templating language with the full feature set of HTML available, a dynamic web framework to run locally, and a free web hosting service. Additionally the hosting service needs to be able to run the webapp, or I find some utility to crawl the site and convert it into static content.</p><h2>Mako templates</h2><p>There are a lot of templating languages out there. The idea is you want reusable pieces of content that are easy to work with, instead of straight HTML. You also want to be able to make the content of some pages depend on external data, like when you are making an index of articles. I went with <a class="tech" href="https://www.makotemplates.org/" target="blank_" title="Template library for python">mako</a>. Mako templates are little like PHP files in the sense you intermingle HTML with scripting, except that with Mako the scripting language is <a class="tech" href="https://www.python.org/" target="blank_" title="Fairly ubiquitous programming language">python</a>. They also support templates that use an HTML-like notation. And you can nest your templates. I may come back and talk about the pros and cons of working with <a class="tech" href="https://www.makotemplates.org/" target="blank_" title="Template library for python">mako</a> later.</p><p>I also considered <a class="tech" href="https://gohugo.io/" target="blank_" title="Static website framework">hugo</a>, which is a full static website builder that supports a mixture of Markdown and HTML. Markdown looks nicer than HTML for most things, and it's also less cumbersome to work with; but for complicated things the flexibility of HTML is the only choice, and I'd rather work with one templating language than two. The main reason I decided against <a class="tech" href="https://gohugo.io/" target="blank_" title="Static website framework">hugo</a> though was I think the site structure it imposes would be too rigid for argument maps and interactive fiction. A quick search will reveal there are countless other choices for templating languages too.</p><h2>Pyramid web framework</h2><p>Like most things <a class="tech" href="https://www.python.org/" target="blank_" title="Fairly ubiquitous programming language">python</a>, you can choose from way too many web frameworks. I don't know anything about any of them, but I chose <a class="tech" href="https://trypyramid.com/" target="blank_" title="Python web framework">pyramid</a> because it claimed to readily support <a class="tech" href="https://www.makotemplates.org/" target="blank_" title="Template library for python">mako</a> templates.</p><pre class="snippet">pip install pyramid pyramid_mako</pre><p>The annotation-based configuration is a little annoying, but so far the framework is good enough. A project like this isn't sophisticated, and shouldn't stretch the limits any web framework very far.</p><p>I also considered using the <a class="tech" href="https://www.makotemplates.org/" target="blank_" title="Template library for python">mako</a> library directly, and rolling my own build phase that produced HTML from the templates via a script. The library was fairly easy to work with, but the downside was the inconvenience of running the build script every time I wanted to see what a page looked like in the browser.</p><h2>GitHub Pages</h2><p>I found that <a href="https://docs.github.com/en/pages" target="blank_">GitHub Pages</a> provides free web hosting with a custom domain name. You can't host web apps though, only static content. Luckily <a class="tech" href="https://www.gnu.org/software/wget/manual/wget.html" target="blank_" title="Retrieves data over the Internet">wget</a> can help convert a webapp into static content. There are some nuances to getting it set up. You create a special publishing repository, <code>sbaldasty.github.io</code> in my case, and tell GitHub that is your site. GitHub supports more complicated workflows, which I didn't use.</p><p>To set up a custom domain name you need a <code>CNAME</code> file in the publishing repository root that contains the domain name. There are additional steps on the domain name side, like setting up <code>A</code> records. For the moment, I won't document those here since I am eager to get to work on other things.</p><p>This series of commands deploys the static website to GitHub Pages. The current directory should be where your Pages repository is checked out. If combining the commands into a single <a class="tech" href="https://ss64.com/bash/bash.html" target="blank_" title="Common shell for Linux">bash</a> script, then configuring the script to terminate on errors is also nice. That way in case something goes wrong with the static content generation, the actual deployment does not take place.</p><pre class="snippet"># Update in case site was deployed from another device
git pull

# Delete everything except the .git directory
find . -mindepth 1 -not -path &#39;./.git*&#39; -delete

# Convert webapp to static content
wget --mirror \
  # Add .html extensions when needed
  --adjust-extension \
  # Recursively copy referenced resources
  --page-requisites \
  # Don&#39;t copy resources higher up the tree
  --no-parent \
  # Don&#39;t wrap the whole site in a subdirectory
  --no-host-directories \
  # Where to start from
  http://localhost:6543

# Restore CNAME for GitHub Pages
echo &#34;bitflippin.com&#34; &gt; CNAME

# Deploy changes
git add .
git commit -m &#34;sync static site&#34;
git push</pre><p>The idea is to delete all the content in the publishing repository locally except for the <a class="tech" href="https://git-scm.com/" target="blank_" title="Manages partition tables on a disk">git</a> metadata, and then use <a class="tech" href="https://www.gnu.org/software/wget/manual/wget.html" target="blank_" title="Retrieves data over the Internet">wget</a> to reconstruct it from scratch. This should result in a nice clean diff to push, with the just latest changes. There's an extra step to restore the <code>CNAME</code> file, because I found restoring it easier than excluding it from being deleted in the first place.</p><h2>Neovim syntax highlighting addendum</h2><p>I much later experimented with <a class="tech" href="https://neovim.io/" target="blank_" title="Customizable modern text editor">nvim</a> as a text editor. Thinking it would be a fun and easy project to add syntax highlighting support as I wrote my webpages there, I developed a <a class="tech" href="https://tree-sitter.github.io/tree-sitter/" target="blank_" title="Parser generator tool and incremental parsing library">treesitter</a> grammar for Mako templates. Between in-flux documentation, badly misinformed coding assistants, and the need for writing heavily customized tokenizing logic in C, it was neither easy nor fun. Even though the highlighting mostly works, it falls short of the stability one should expect from publicly released software. The <a href="https://github.com/sbaldasty/tree-sitter-mako" target="blank_">grammar is available</a> on GitHub for manual installation nonetheless.</p></div><hr class="top-gapped"><div class="author"><div class="exposition"><div class="title">Steven Baldasty</div><div class="caption">Proud father, Barefoot runner, Chocolate enthusiast, Seasoned software engineer, Starry eyed PhD student, Novice human</div></div><img src="/selfie.png" title="Sketch courtesy of my daughter" alt="Handsome brown haired man with glasses" width="80" height="88"></div></body></html>